<!-- ====================================
     BUYER NAVIGATION BAR - WITH LOGIN STATE
     ==================================== -->
<nav class="nav-bar" id="navbar">
  <div class="nav-gradient-top"></div>
  <div class="container nav-container">
    <!-- Logo -->
    <div class="nav-logo">
      <a href="/">
        <img src="/images/PARTSFORM-LOGO-CWstUpY1.webp" alt="PartsForm Logo" class="logo-image">
      </a>
    </div>

    <!-- Mobile Menu Toggle Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu" aria-expanded="false">
      <span class="menu-icon">
        <span class="menu-line"></span>
        <span class="menu-line"></span>
        <span class="menu-line"></span>
      </span>
    </button>

    <!-- Navigation Links -->
    <div class="nav-links" id="navLinks">
      <!-- Search Dropdown -->
      <div class="nav-dropdown">
        <button class="nav-link dropdown-trigger" id="searchDropdownBtn">
          <span><%= t('nav.search') %></span>
          <i data-lucide="chevron-down" class="dropdown-chevron"></i>
        </button>
        <div class="nav-dropdown-menu" id="searchDropdownMenu">
          <a href="/buyer/search-automotive" class="nav-dropdown-item">
            <i data-lucide="car-front"></i>
            <div>
              <span class="dropdown-item-title"><%= t('nav.searchDropdown.automotive.title') %></span>
              <span class="dropdown-item-desc"><%= t('nav.searchDropdown.automotive.desc') %></span>
            </div>
          </a>
          <a href="/buyer/search-aviation" class="nav-dropdown-item">
            <i data-lucide="plane"></i>
            <div>
              <span class="dropdown-item-title"><%= t('nav.searchDropdown.aviation.title') %></span>
              <span class="dropdown-item-desc"><%= t('nav.searchDropdown.aviation.desc') %></span>
            </div>
          </a>
          <a href="/buyer/search-machinery" class="nav-dropdown-item">
            <i data-lucide="construction"></i>
            <div>
              <span class="dropdown-item-title"><%= t('nav.searchDropdown.machinery.title') %></span>
              <span class="dropdown-item-desc"><%= t('nav.searchDropdown.machinery.desc') %></span>
            </div>
          </a>
        </div>
      </div>

      <a href="/buyer/orders" class="nav-link" data-section="orders"><%= t('nav.myOrders') %></a>
      <a href="/buyer/tickets" class="nav-link" data-section="tickets"><%= t('nav.tickets') %></a>
      <a href="/buyer/affiliate" class="nav-link" data-section="affiliate"><%= t('nav.affiliate') %></a>
      <a href="/buyer/payment" class="nav-link" data-section="payment"><%= t('nav.payment') %></a>
      <a href="/buyer/delivery" class="nav-link" data-section="delivery"><%= t('nav.delivery') %></a>
      <a href="/buyer/contacts" class="nav-link" data-section="contacts"><%= t('nav.contacts') %></a>
      
      <!-- More Dropdown for overflow items -->
      <div class="nav-dropdown nav-more-dropdown" id="moreDropdown" style="display: none;">
        <button class="nav-link dropdown-trigger" id="moreDropdownBtn">
          <span><%= t('nav.more') %></span>
          <i data-lucide="chevron-down" class="dropdown-chevron"></i>
        </button>
        <div class="nav-dropdown-menu" id="moreDropdownMenu">
          <!-- Overflow items will be moved here dynamically -->
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="nav-actions" id="navActions">
      <!-- Shopping Cart Button -->
      <a href="/buyer/cart" class="btn-cart" id="cart-btn" title="<%= t('nav.cart') %>">
        <i data-lucide="shopping-cart"></i>
        <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
      </a>

      <!-- Quick Search Button -->
      <button class="btn-quick-search" id="quick-search-btn" title="<%= t('nav.quickSearch') %>">
        <i data-lucide="search"></i>
        <span><%= t('nav.quickSearch') %></span>
      </button>

      <!-- Language Selector -->
      <div class="language-selector">
        <button class="language-btn" id="language-btn">
          <span class="lang-flag" id="current-flag">ðŸ‡¬ðŸ‡§</span>
          <span class="lang-code" id="current-lang">EN</span>
          <i data-lucide="chevron-down" class="lang-chevron"></i>
        </button>
        <div class="language-dropdown" id="language-dropdown">
          <button class="lang-option" data-lang="en" data-flag="ðŸ‡¬ðŸ‡§">
            <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
            <span class="lang-name"><%= t('nav.language.english') %></span>
          </button>
          <button class="lang-option" data-lang="ar" data-flag="ðŸ‡¸ðŸ‡¦">
            <span class="lang-flag">ðŸ‡¸ðŸ‡¦</span>
            <span class="lang-name"><%= t('nav.language.arabic') %></span>
          </button>
          <button class="lang-option" data-lang="ru" data-flag="ðŸ‡·ðŸ‡º">
            <span class="lang-flag">ðŸ‡·ðŸ‡º</span>
            <span class="lang-name"><%= t('nav.language.russian') %></span>
          </button>
          <button class="lang-option" data-lang="ua" data-flag="ðŸ‡ºðŸ‡¦">
            <span class="lang-flag">ðŸ‡ºðŸ‡¦</span>
            <span class="lang-name"><%= t('nav.language.ukrainian') %></span>
          </button>
          <button class="lang-option" data-lang="fr" data-flag="ðŸ‡«ðŸ‡·">
            <span class="lang-flag">ðŸ‡«ðŸ‡·</span>
            <span class="lang-name"><%= t('nav.language.french') %></span>
          </button>
          <button class="lang-option" data-lang="es" data-flag="ðŸ‡ªðŸ‡¸">
            <span class="lang-flag">ðŸ‡ªðŸ‡¸</span>
            <span class="lang-name"><%= t('nav.language.spanish') %></span>
          </button>
        </div>
      </div>

      <!-- Sign In Button (shown when not logged in) -->
      <button class="btn-secondary btn-sign-in" id="sign-in-btn" style="display: none;">
        <i data-lucide="user"></i>
        <span><%= t('nav.user.signIn') %></span>
      </button>

      <!-- User Profile Dropdown (shown when logged in) -->
      <div class="user-profile-dropdown" id="userProfileDropdown" style="display: none;">
        <button type="button" class="user-profile-btn" id="userProfileBtn">
          <div class="user-avatar">
            <i data-lucide="user"></i>
          </div>
          <span class="user-name" id="userName">User</span>
          <i data-lucide="chevron-down" class="user-chevron"></i>
        </button>
        <div class="user-dropdown-menu" id="userDropdownMenu">
          <a href="/buyer/profile" class="user-dropdown-item">
            <i data-lucide="user"></i>
            <span><%= t('nav.user.profile') %></span>
          </a>
          <a href="/buyer/settings" class="user-dropdown-item">
            <i data-lucide="settings"></i>
            <span><%= t('nav.user.settings') %></span>
          </a>
          <div class="user-dropdown-divider"></div>
          <button class="user-dropdown-item" id="logoutBtn">
            <i data-lucide="log-out"></i>
            <span><%= t('nav.user.logout') %></span>
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Menu Backdrop -->
<div class="mobile-backdrop" id="mobileBackdrop"></div>

<!-- Navbar JavaScript -->
<script src="/js/i18n.js"></script>
<script src="/js/navbar.js"></script>
<script src="/js/buyer-auth.js"></script>